{"version":3,"sources":["../../../src/components/game/Game.jsx"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAM,IAAI,GAAG,KAAK,CAAC,WAAW,CAAC;AAC9B,YAAW,EAAE,MAAM;AACnB,UAAS,EAAE;AACV,aAAW,EAAE,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU;AAC5C,WAAS,EAAE,KAAK,CAAC,SAAS,CAAC,IAAI;AAC/B,QAAM,EAAE,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU;AACvC,SAAO,EAAE,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU;EACxC;AACD,gBAAe,6BAAG;AACjB,SAAO;AACN,QAAK,EAAE,IAAI,CAAC,UAAU,EAAE;AACxB,cAAW,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC;GACnC,CAAC;EACF;AACD,0BAAyB,qCAAC,SAAS,EAAE;AACpC,MAAI,SAAS,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;AACrD,OAAI,CAAC,QAAQ,CAAC,EAAC,KAAK,EAAE,IAAI,CAAC,UAAU,EAAE,EAAC,CAAC,CAAC;GAC1C;EACD;AACD,mBAAkB,8BAAC,SAAS,EAAE,SAAS,EAAE;AACxC,MAAM,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AACvD,MAAM,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;;AAE1D,MAAI,MAAM,IAAI,UAAU,KAAK,MAAM,EAAE;AACpC,OAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;GAC3B,MAAK;AACL,OAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AACrD,OAAM,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;;AAExD,OAAI,SAAS,IAAI,aAAa,KAAK,SAAS,EAAE;AAC7C,QAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACzB;GACD;EACD;AACD,UAAS,qBAAC,QAAQ,EAAE,SAAS,EAAE;AAC9B,MAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,SAAS,CAAC,EAAE;AAC1C,OAAI,CAAC,QAAQ,CAAC,EAAC,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,WAAW,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC,EAAC,CAAC,CAAC;AAC5J,OAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;GACpB;EACD;AACD,WAAU,wBAAG;AACZ,SAAO,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,YAAM;AAC9B,UAAO,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,YAAM;AAC9B,WAAO,IAAI,CAAC;IACZ,CAAC,CAAA;GACF,CAAC,CAAC;EACH;AACD,iBAAgB,4BAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE;AACpC,SAAO,KAAK,CAAC,GAAG,CAAC,UAAC,GAAG,EAAE,QAAQ,EAAK;AACnC,UAAO,GAAG,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,SAAS,EAAK;AACnC,WAAO,QAAQ,KAAK,CAAC,IAAI,SAAS,KAAK,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC;IACxD,CAAC,CAAC;GACH,CAAC,CAAC;EACH;AACD,YAAW,uBAAC,QAAQ,EAAE,SAAS,EAAE;AAChC,SAAO,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC;EACxE;AACD,cAAa,yBAAC,QAAQ,EAAE,SAAS,EAAE;AAClC,MAAI,CAAC,QAAQ,CAAC,EAAC,WAAW,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC,EAAC,CAAC,CAAC;AACrD,MAAI,QAAQ,KAAK,SAAS,IAAI,SAAS,KAAK,SAAS,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,SAAS,CAAC,EAAE;AAC/F,OAAI,CAAC,QAAQ,CAAC,EAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,SAAS,CAAC,EAAC,CAAC,CAAC;GACpD;EACD;AACD,iBAAgB,4BAAC,KAAK,EAAE;AACvB,MAAM,WAAW,GAAG,SAAd,WAAW,CAAI,MAAM,EAAK;AAC/B,OAAM,SAAS,GAAG,SAAZ,SAAS,GAAS;AACvB,WAAO,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAC,GAAG,EAAK;AAC7B,YAAO,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,UAAC,IAAI,EAAK;AAC7B,aAAO,IAAI,KAAK,MAAM,CAAC;MACvB,CAAC,CAAC;KACH,CAAC,CAAC;IACH,CAAC;AACF,OAAM,SAAS,GAAG,SAAZ,SAAS,GAAS;AACvB,WAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,UAAC,GAAG,EAAK;AACrC,YAAO,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,UAAC,GAAG,EAAK;AAC9B,aAAO,GAAG,CAAC,GAAG,CAAC,KAAK,MAAM,CAAC;MAC3B,CAAC,CAAC;KACH,CAAC,CAAC;IACH,CAAC;AACF,OAAM,cAAc,GAAG,SAAjB,cAAc,GAAS;AAC5B,WAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,UAAC,KAAK,EAAK;AACxC,YAAO,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,KAAK,MAAM,CAAC;KACtC,CAAC,IACF,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,UAAC,KAAK,EAAK;AACjC,YAAO,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,MAAM,CAAC;KAC1C,CAAC,CAAC;IACH,CAAC;;AAEF,UAAO,SAAS,EAAE,IAAI,SAAS,EAAE,IAAI,cAAc,EAAE,CAAC;GACtD,CAAC;;AAEF,MAAI,WAAW,CAAC,GAAG,CAAC,EAAE;AACrB,UAAO,GAAG,CAAC;GACX;AACD,MAAI,WAAW,CAAC,GAAG,CAAC,EAAE;AACrB,UAAO,GAAG,CAAC;GACX;AACD,SAAO,SAAS,CAAC;EACjB;AACD,YAAW,uBAAC,KAAK,EAAE;AAClB,SAAO,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,UAAC,GAAG,EAAK;AAC5B,UAAO,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,UAAC,IAAI,EAAK;AAC3B,WAAO,IAAI,KAAK,IAAI,CAAC;IACrB,CAAC,CAAC;GACH,CAAC,CAAC;EACH;AACD,OAAM,oBAAG;;;AACR,SACC;;;AACC,aAAS,EAAC,MAAM;;GAEf,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,UAAC,GAAG,EAAE,QAAQ,EAAK;AACxC,WACC;;;AACC,eAAS,EAAC,KAAK;AACf,SAAG,EAAE,QAAQ,AAAC;;KAEb,GAAG,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,SAAS,EAAK;AAC7B,aACC;;;AACC,iBAAS,EAAC,MAAM;AAChB,WAAG,EAAE,SAAS,AAAC;AACf,eAAO,EAAE,MAAK,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,SAAS,CAAC,AAAC;AACxD,mBAAW,EAAE,MAAK,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,SAAS,CAAC,AAAC;AAChE,oBAAY,EAAE,MAAK,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,EAAE,SAAS,CAAC,AAAC;;OAEjE,CAAC,IAAI,KAAK,GAAG,IAAI,MAAK,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,MAAK,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,SAAS,IAAI,MAAK,KAAK,CAAC,SAAS,CAAA,IAAK;;;AAC7H,gBAAO,EAAG,SAAS;AACnB,kBAAS,EAAE,UAAU,CAAC,EAAC,WAAW,EAAE,IAAI,KAAK,GAAG,EAAC,CAAC,AAAC;;QAEpD,8BAAM,EAAE,EAAG,GAAG,EAAC,EAAE,EAAG,GAAG,EAAC,EAAE,EAAG,GAAG,EAAC,EAAE,EAAG,GAAG,GAAE;QAC3C,8BAAM,EAAE,EAAG,GAAG,EAAC,EAAE,EAAG,GAAG,EAAC,EAAE,EAAG,GAAG,EAAC,EAAE,EAAG,GAAG,GAAE;QACtC;OAEN,CAAC,IAAI,KAAK,GAAG,IAAI,MAAK,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,MAAK,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,MAAK,KAAK,CAAC,SAAS,CAAA,IAAK;;;AAC9H,gBAAO,EAAG,SAAS;AACnB,kBAAS,EAAE,UAAU,CAAC,EAAC,WAAW,EAAE,IAAI,KAAK,GAAG,EAAC,CAAC,AAAC;;QAEpD,gCAAQ,EAAE,EAAG,KAAK,EAAC,EAAE,EAAG,KAAK,EAAC,CAAC,EAAG,MAAM,GAAE;QACrC;OAEF,CACL;MACF,CAAC;KACG,CACL;IACF,CAAC;GACG,CACL;EACF;CACD,CAAC,CAAC","file":"Game.js","sourcesContent":["\"use strict\";\n\nconst Game = React.createClass({\n\tdisplayName: \"Game\",\n\tpropTypes: {\n\t\tgameStarted: React.PropTypes.bool.isRequired,\n\t\tcrossTurn: React.PropTypes.bool,\n\t\tplaced: React.PropTypes.func.isRequired,\n\t\tendGame: React.PropTypes.func.isRequired\n\t},\n\tgetInitialState() {\n\t\treturn {\n\t\t\ttable: this.emptyBoard(),\n\t\t\thighlighted: [undefined, undefined]\n\t\t};\n\t},\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.gameStarted && !this.props.gameStarted) {\n\t\t\tthis.setState({table: this.emptyBoard()});\n\t\t}\n\t},\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tconst winner = this.getWinningPlayer(this.state.table);\n\t\tconst prevWinner = this.getWinningPlayer(prevState.table);\n\n\t\tif (winner && prevWinner !== winner) {\n\t\t\tthis.props.endGame(winner);\n\t\t}else {\n\t\t\tconst tableFull = this.isTableFull(this.state.table);\n\t\t\tconst prevTableFull = this.isTableFull(prevState.table);\n\n\t\t\tif (tableFull && prevTableFull !== tableFull) {\n\t\t\t\tthis.props.endGame(null);\n\t\t\t}\n\t\t}\n\t},\n\tplaceMark(rowIndex, cellIndex) {\n\t\tif (this.isValidMove(rowIndex, cellIndex)) {\n\t\t\tthis.setState({table: this.getModifiedBoard(this.state.table, rowIndex, cellIndex, this.props.crossTurn ? \"X\" : \"O\"), highlighted: [undefined, undefined]});\n\t\t\tthis.props.placed();\n\t\t}\n\t},\n\temptyBoard() {\n\t\treturn _.range(0, 3).map(() => {\n\t\t\treturn _.range(0, 3).map(() => {\n\t\t\t\treturn null;\n\t\t\t})\n\t\t});\n\t},\n\tgetModifiedBoard(board, y, x, value) {\n\t\treturn board.map((row, rowIndex) => {\n\t\t\treturn row.map((cell, cellIndex) => {\n\t\t\t\treturn rowIndex === y && cellIndex === x ? value : cell;\n\t\t\t});\n\t\t});\n\t},\n\tisValidMove(rowIndex, cellIndex) {\n\t\treturn this.props.gameStarted && !this.state.table[rowIndex][cellIndex];\n\t},\n\thighlightMove(rowIndex, cellIndex) {\n\t\tthis.setState({highlighted: [undefined, undefined]});\n\t\tif (rowIndex !== undefined && cellIndex !== undefined && this.isValidMove(rowIndex, cellIndex)) {\n\t\t\tthis.setState({highlighted: [rowIndex, cellIndex]});\n\t\t}\n\t},\n\tgetWinningPlayer(table) {\n\t\tconst checkPlayer = (player) => {\n\t\t\tconst checkRows = () => {\n\t\t\t\treturn _.some(table, (row) => {\n\t\t\t\t\treturn _.every(row, (cell) => {\n\t\t\t\t\t\treturn cell === player;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\t\t\tconst checkCols = () => {\n\t\t\t\treturn _.some(_.range(0, 3), (col) => {\n\t\t\t\t\treturn _.every(table, (row) => {\n\t\t\t\t\t\treturn row[col] === player;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\t\t\tconst checkDiagonals = () => {\n\t\t\t\treturn _.every(_.range(0, 3), (index) => {\n\t\t\t\t\treturn table[index][index] === player;\n\t\t\t\t}) ||\n\t\t\t\t_.every(_.range(0, 3), (index) => {\n\t\t\t\t\treturn table[index][2 - index] === player;\n\t\t\t\t});\n\t\t\t};\n\n\t\t\treturn checkRows() || checkCols() || checkDiagonals();\n\t\t};\n\n\t\tif (checkPlayer(\"X\")) {\n\t\t\treturn \"X\";\n\t\t}\n\t\tif (checkPlayer(\"O\")) {\n\t\t\treturn \"O\";\n\t\t}\n\t\treturn undefined;\n\t},\n\tisTableFull(table) {\n\t\treturn _.all(table, (row) => {\n\t\t\treturn _.all(row, (cell) => {\n\t\t\t\treturn cell !== null;\n\t\t\t});\n\t\t});\n\t},\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"game\"\n\t\t\t>\n\t\t\t\t{this.state.table.map((row, rowIndex) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"row\"\n\t\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{row.map((cell, cellIndex) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"cell\"\n\t\t\t\t\t\t\t\t\t\tkey={cellIndex}\n\t\t\t\t\t\t\t\t\t\tonClick={this.placeMark.bind(null, rowIndex, cellIndex)}\n\t\t\t\t\t\t\t\t\t\tonMouseOver={this.highlightMove.bind(null, rowIndex, cellIndex)}\n\t\t\t\t\t\t\t\t\t\tonMouseLeave={this.highlightMove.bind(null, undefined, undefined)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{(cell === \"X\" || this.state.highlighted[0] === rowIndex && this.state.highlighted[1] === cellIndex && this.props.crossTurn) && <svg\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox = \"0 0 1 1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classNames({highlighted: cell !== \"X\"})}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<line x1 = \"0\" y1 = \"0\" x2 = \"1\" y2 = \"1\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<line x1 = \"1\" y1 = \"0\" x2 = \"0\" y2 = \"1\"/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t{(cell === \"O\" || this.state.highlighted[0] === rowIndex && this.state.highlighted[1] === cellIndex && !this.props.crossTurn) && <svg\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox = \"0 0 1 1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classNames({highlighted: cell !== \"O\"})}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<circle cx = \"0.5\" cy = \"0.5\" r = \"0.45\"/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t })}\n\t\t\t</div>\n\t\t);\n\t}\n});\n\n"]}